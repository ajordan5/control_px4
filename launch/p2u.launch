<?xml version="1.0"?>

<launch>
    <node name="listener" pkg="listener" type="listener_node" output="screen"/>
    <group ns="p2u">
        <rosparam command="load" file="$(find control_px4)/params/px4_2ublox.yaml"/>
        <node name="px4_2ublox" pkg="control_px4" type="px4_2ublox.py" output="screen">
            <!-- <remap from="/rover_pose" to="/rover_pose"/>
            <remap from="/base_pose" to="/base_pose"/> -->
        </node>
    </group>
    <node name="nav" pkg="control_px4" type="nav.py" output="screen">
        <remap from="rover_relPos" to="/p2u/RelPos"/>
        <remap from="posVelEcef" to="/p2u/PosVelEcef"/>
        <remap from="base_posVelEcef" to="/p2u/boat/PosVelEcef"/>
    </node>
    <node name="state_machine" pkg="control_px4" type="state_machine.py" output="screen">
        <remap from="relPos" to="/relPos_stripped"/>
        <remap from="odom" to="/estimate"/>
    </node>
    <node name="velocity_controller" pkg="control_px4" type="vel_controller.py" output="screen">
        <remap from="hlc" to="/hlc"/>
        <remap from="base_vel" to="base_velocity"/>
        <remap from="begin_landing_routine" to="/begin_landing_routine"/>
    </node>
    <node name="control_px4" pkg="control_px4" type="control_px4.py" output="screen">
        <remap from="velCmd" to="/vel_cmd"/>
        <remap from="lla_measurement" to="/ublox_lla"/>
    </node>
</launch>